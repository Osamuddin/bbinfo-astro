---
import Layout from '../layouts/Layout.astro';
---

<Layout>
    <section class="relative min-h-screen flex justify-center pt-36 pb-20 overflow-hidden">
        <div class="relative z-10 max-w-7xl mx-auto px-6 text-center">
            <div class="reveal-up font-black mb-10 tracking-tight">
                <div class="text-3xl sm:text-5xl md:text-6xl lg:text-8xl mb-4 md:mb-8 text-transparent bg-clip-text bg-gradient-to-b from-white to-white/80">
                    あなたのインド生活に、
                </div>
                <div class="text-5xl sm:text-6xl md:text-8xl lg:text-9xl text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-white to-rose-500 text-glow leading-tight pt-2 pb-2 break-keep">
                    日本のテレビを。
                </div>
            </div>
            <p class="reveal-up text-gray-400 text-sm md:text-lg max-w-2xl mx-auto mb-12 leading-loose">
                BBINFOならインドにいても<br class="hidden md:block">日本のテレビ（地上波、BS、CS）66チャンネルが楽しめます。<br>
                VPN機能付きセットボックスだから<br class="hidden md:block">日本のNetflixやAmazon Prime、AbemaやTVerも視聴可能。<br><br>
                <span class="text-white font-semibold text-lg md:text-xl">1週間の無料体験で、まずはお試しください。</span>
            </p>
            <div class="reveal-up flex flex-col md:flex-row gap-4 justify-center items-center">
                <a href="trial.html" class="gradient-button inline-flex items-center justify-center rounded-full min-w-[132px] px-6 md:px-9 py-4 text-sm leading-[19px] font-medium text-white font-sans font-bold focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:scale-105 transition-transform duration-300 whitespace-nowrap">
                    <span class="flex items-center gap-2">1週間無料体験を申し込む <i class="ph-bold ph-lightning"></i></span>
                </a>
            </div>
        </div>
        <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce text-gray-500"><i class="ph ph-caret-down text-2xl"></i></div>
    </section>

    <section id="service_detail" class="py-24 px-6 relative">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16 reveal-up">
                <h2 class="text-3xl md:text-5xl font-bold mb-4">Why BBINFO?</h2>
                <p class="text-gray-400">圧倒的な利便性と品質</p>
            </div>
            <div class="bento-grid grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8 auto-rows-fr">
                <div class="col-span-1 md:col-span-2 row-span-2 reveal-up glass-panel p-0 rounded-3xl overflow-hidden group hover:border-white/20 transition-colors duration-500 min-h-[300px]">
                    <div class="relative h-full flex flex-col justify-end p-8">
                        <div class="absolute top-0 right-0 w-full h-full z-0">
                            <img src="https://images.unsplash.com/photo-1542051841857-5f90071e7989?q=80&w=1600&auto=format&fit=crop" alt="Tokyo Neon Night" class="w-full h-full object-cover opacity-30 group-hover:scale-110 transition-transform duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"></div>
                        </div>
                        <div class="relative z-10 h-full flex flex-col justify-end">
                            <div class="w-12 h-12 bg-black/90 rounded-xl flex items-center justify-center mb-4 border border-white/10"><i class="ph-fill ph-television text-2xl text-cyan-400"></i></div>
                            <h3 class="text-2xl md:text-3xl font-bold mb-2">地上波・BS・CS 66局</h3>
                            <p class="text-gray-300 mb-4 text-sm md:text-base">日本の主要チャンネルを完全網羅。リアルタイム視聴はもちろん、30分のタイムシフト機能で「今」を見逃しません。</p>
                            <div class="flex flex-wrap gap-2 text-xs font-mono text-cyan-300">
                                <span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">NHK</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">日テレ</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">テレ朝</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">TBS</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">フジ</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">WOWOW</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">J SPORTS</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">アニマックス</span><span class="px-2 py-1 bg-cyan-900/30 rounded border border-cyan-500/30">ディズニー</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-panel p-8 rounded-3xl reveal-up flex flex-col justify-between hover:border-white/20 transition-colors duration-500 min-h-[200px]" style="transition-delay: 100ms;">
                    <i class="ph-fill ph-clock-counter-clockwise text-4xl text-purple-400 mb-4"></i>
                    <div><h3 class="text-xl font-bold mb-2">4週間見逃し視聴</h3><p class="text-sm text-gray-400">忙しいあなたへ。過去4週間分の全番組をクラウドに保存。いつでも好きな時に再生可能です。</p></div>
                </div>
                <div class="glass-panel p-8 rounded-3xl reveal-up flex flex-col justify-between hover:border-white/20 transition-colors duration-500 min-h-[200px]" style="transition-delay: 200ms;">
                    <i class="ph-fill ph-globe-hemisphere-east text-4xl text-green-400 mb-4"></i>
                    <div><h3 class="text-xl font-bold mb-2">VPN機能付きセットボックス</h3><p class="text-sm text-gray-400">面倒な設定は不要。Netflix, Amazon Prime, Abemaも日本と同じ環境で楽しめます。</p><p class="text-[10px] text-gray-600 mt-2">*別途各サービスの契約が必要です</p></div>
                </div>
                <div class="col-span-1 glass-panel p-8 rounded-3xl reveal-up flex flex-col justify-between hover:border-white/20 transition-colors duration-500 min-h-[200px]">
                    <i class="ph-fill ph-device-mobile-camera text-4xl text-pink-500 mb-4"></i>
                    <div><h3 class="text-xl font-bold mb-2">スマホ・タブレット</h3><p class="text-sm text-gray-400">専用アプリで、移動中や外出先でも快適に日本のテレビを楽しめます。</p></div>
                </div>
                <div class="col-span-1 md:col-span-2 glass-panel p-8 rounded-3xl reveal-up hover:border-white/20 transition-colors duration-500 relative overflow-hidden min-h-[200px]">
                    <div class="absolute -right-20 -bottom-20 w-64 h-64 bg-cyan-500/20 rounded-full blur-3xl pointer-events-none"></div>
                    <div class="flex flex-col md:flex-row items-center gap-8 relative z-10 h-full">
                        <div class="flex-1">
                            <h3 class="text-xl md:text-2xl font-bold mb-2">ストレスフリーな視聴体験</h3>
                            <p class="text-gray-400">専用機器をテレビとネットにつなぐだけ。面倒な設定はありません。</p>
                        </div>
                        <div class="flex-1 grid grid-cols-3 gap-4 w-full relative z-10">
                            <div class="text-center p-2 md:p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-xl md:text-2xl font-bold text-cyan-400 mb-1">HD</div><div class="text-[8px] md:text-[10px] text-gray-500 uppercase tracking-widest">Quality</div></div>
                            <div class="text-center p-2 md:p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-xl md:text-2xl font-bold text-cyan-400 mb-1">0s</div><div class="text-[8px] md:text-[10px] text-gray-500 uppercase tracking-widest">Lag Free</div></div>
                            <div class="text-center p-2 md:p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-xl md:text-2xl font-bold text-cyan-400 mb-1">JP</div><div class="text-[8px] md:text-[10px] text-gray-500 uppercase tracking-widest">日本語サポート</div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="channels" class="py-24 px-6 bg-gradient-to-t from-black to-transparent">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-5xl font-bold mb-4 text-center reveal-up">チャンネル一覧</h2>
            <p class="text-gray-400 text-center mb-12 reveal-up">地上波・BS・CS、合わせて66チャンネル</p>
            
            <div class="space-y-6">
                <div class="static-card-container reveal-up accordion-item">
                    <button class="static-card-content group w-full flex justify-between items-center p-6 cursor-pointer list-none hover:bg-white/5 transition-colors text-left accordion-trigger focus:outline-none">
                        <div class="flex items-center gap-4">
                            <span class="w-2 h-2 rounded-full bg-white shadow-[0_0_10px_white]"></span>
                            <span class="font-bold text-base md:text-lg text-white">地上波：15ch</span>
                        </div>
                        <i class="ph-bold ph-caret-down caret-icon text-white transition-transform duration-300"></i>
                    </button>
                    <div class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 ease-out accordion-wrapper">
                        <div class="overflow-hidden min-h-0">
                            <div class="channel-grid-wrapper p-6 border-t border-white/10">
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm md:text-base text-gray-300">
                                    <div class="hover:text-white transition-colors">NHK 総合東京</div><div class="hover:text-white transition-colors">NHK Eテレ</div><div class="hover:text-white transition-colors">日本テレビ</div><div class="hover:text-white transition-colors">テレビ朝日</div><div class="hover:text-white transition-colors">TBSテレビ</div><div class="hover:text-white transition-colors">テレビ東京</div><div class="hover:text-white transition-colors">フジテレビ</div><div class="hover:text-white transition-colors">TOKYO MX</div><div class="hover:text-white transition-colors">NHK総合大阪</div><div class="hover:text-white transition-colors">読売テレビ</div><div class="hover:text-white transition-colors">毎日放送</div><div class="hover:text-white transition-colors">関西テレビ</div><div class="hover:text-white transition-colors">朝日放送</div><div class="hover:text-white transition-colors">テレビ大阪</div><div class="hover:text-white transition-colors">サンテレビ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="static-card-container reveal-up accordion-item">
                    <button class="static-card-content group w-full flex justify-between items-center p-6 cursor-pointer list-none bg-blue-900/10 hover:bg-blue-900/20 transition-colors text-left accordion-trigger focus:outline-none">
                        <div class="flex items-center gap-4">
                            <span class="w-2 h-2 rounded-full bg-blue-400 shadow-[0_0_10px_#60a5fa]"></span>
                            <span class="font-bold text-base md:text-lg text-white">BS：21ch</span>
                        </div>
                        <i class="ph-bold ph-caret-down caret-icon text-white transition-transform duration-300"></i>
                    </button>
                    <div class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 ease-out accordion-wrapper">
                        <div class="overflow-hidden min-h-0">
                            <div class="channel-grid-wrapper p-6 border-t border-white/10">
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm md:text-base text-gray-300">
                                    <div class="hover:text-white transition-colors">NHK BS 東京</div><div class="hover:text-white transition-colors">NHK BSP4K</div><div class="hover:text-white transition-colors">BS 日本テレビ</div><div class="hover:text-white transition-colors">BS朝日</div><div class="hover:text-white transition-colors">BS TBS</div><div class="hover:text-white transition-colors">BS テレビ東京</div><div class="hover:text-white transition-colors">BS フジ</div><div class="hover:text-white transition-colors">WOWWOW Plime</div><div class="hover:text-white transition-colors">WOWWOW ライブ</div><div class="hover:text-white transition-colors">WOWWOW シネマ</div><div class="hover:text-white transition-colors">BS10 スターチャンネル</div><div class="hover:text-white transition-colors">グリーンチャンネル</div><div class="hover:text-white transition-colors">BS アニマックス</div><div class="hover:text-white transition-colors">J-Sports 1</div><div class="hover:text-white transition-colors">J-Sports 2</div><div class="hover:text-white transition-colors">J-Sports 3</div><div class="hover:text-white transition-colors">J-Sports 4</div><div class="hover:text-white transition-colors">BS 釣りビジョン</div><div class="hover:text-white transition-colors">日本映画専門チャンネル</div><div class="hover:text-white transition-colors">Disney チャンネル</div><div class="hover:text-white transition-colors">J:COM BS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="static-card-container reveal-up accordion-item">
                    <button class="static-card-content group w-full flex justify-between items-center p-6 cursor-pointer list-none bg-green-900/10 hover:bg-green-900/20 transition-colors text-left accordion-trigger focus:outline-none">
                        <div class="flex items-center gap-4">
                            <span class="w-2 h-2 rounded-full bg-green-400 shadow-[0_0_10px_#4ade80]"></span>
                            <span class="font-bold text-base md:text-lg text-white">CS：30ch</span>
                        </div>
                        <i class="ph-bold ph-caret-down caret-icon text-white transition-transform duration-300"></i>
                    </button>
                    <div class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 ease-out accordion-wrapper">
                        <div class="overflow-hidden min-h-0">
                            <div class="channel-grid-wrapper p-6 border-t border-white/10">
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm md:text-base text-gray-300">
                                    <div class="hover:text-white transition-colors">衛星劇場</div><div class="hover:text-white transition-colors">ムービープラス HD</div><div class="hover:text-white transition-colors">Sky A Sports</div><div class="hover:text-white transition-colors">Gaora Sports</div><div class="hover:text-white transition-colors">Nihon TV G+</div><div class="hover:text-white transition-colors">ゴルフネットワーク</div><div class="hover:text-white transition-colors">時代劇専門チャンネル</div><div class="hover:text-white transition-colors">ファミリー劇場 HD</div><div class="hover:text-white transition-colors">ホームドラマチャンネル</div><div class="hover:text-white transition-colors">MONDO TV</div><div class="hover:text-white transition-colors">フジテレビ NEXT</div><div class="hover:text-white transition-colors">女性チャンネル / LaLa TV</div><div class="hover:text-white transition-colors">Music Japan TV</div><div class="hover:text-white transition-colors">スペースシャワーTV</div><div class="hover:text-white transition-colors">MTV HD</div><div class="hover:text-white transition-colors">歌謡ポップスチャンネル</div><div class="hover:text-white transition-colors">キッズステーション</div><div class="hover:text-white transition-colors">カートゥーンネットワーク</div><div class="hover:text-white transition-colors">Disney Junior</div><div class="hover:text-white transition-colors">ディスカバリーチャンネル</div><div class="hover:text-white transition-colors">アニマルプラネット</div><div class="hover:text-white transition-colors">ヒストリーチャンネル</div><div class="hover:text-white transition-colors">National Geo graphic</div><div class="hover:text-white transition-colors">TBS News Bird</div><div class="hover:text-white transition-colors">TAKARAZUKA SKY STAGE</div><div class="hover:text-white transition-colors">東映チャンネル</div><div class="hover:text-white transition-colors">CNN J</div><div class="hover:text-white transition-colors">BBC World News</div><div class="hover:text-white transition-colors">旅チャンネル</div><div class="hover:text-white transition-colors">チャンネル銀河 歴史ドラマ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing" class="py-24 px-6 relative overflow-hidden">
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-purple-900/10 rounded-full blur-[100px] pointer-events-none"></div>
        <div class="max-w-7xl mx-auto relative z-10">
            <div class="text-center mb-16 reveal-up">
                <h2 class="text-3xl md:text-5xl font-bold mb-4">料金プラン</h2>
                <p class="text-gray-400">ニーズに合わせて選べる3つのプラン。年払いで最大3ヶ月分がお得に。</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch">
                <div class="glow-card-container interactive reveal-up relative h-full group">
                    <div class="glow-effect" aria-hidden="true"></div>
                    <div class="glow-card-content flex flex-col h-full">
                        <h3 class="text-xl font-bold mb-2">Plan A</h3>
                        <div class="text-4xl font-black mb-3">₹2,800<span class="text-sm font-medium text-gray-500">/mo</span></div>
                        <div class="self-start px-3 py-1 rounded-full bg-cyan-900/20 text-xs text-cyan-300 border border-cyan-500/20 mb-3">年払いで1ヶ月分無料</div>
                        <div class="text-sm text-gray-400 mb-6">年払い: ₹30,800</div>
                        <div class="py-4 border-t border-white/10 mb-6 flex-grow"><div class="text-3xl font-bold mb-1">22<span class="text-sm font-normal text-gray-500 ml-1">Channels</span></div><p class="text-sm text-gray-400">地上波 15ch + BS 7ch</p></div>
                        <button onclick="openChannelModal('planA')" class="block w-full py-3 rounded-xl border border-white/20 hover:bg-white hover:text-black text-center transition-all font-bold cursor-pointer">チャンネルを確認する</button>
                    </div>
                </div>
                <div class="glow-card-container interactive reveal-up relative h-full group">
                    <div class="glow-effect" aria-hidden="true"></div>
                    <div class="glow-card-content flex flex-col h-full">
                        <h3 class="text-xl font-bold mb-2">Plan B</h3>
                        <div class="text-4xl font-black mb-3">₹3,800<span class="text-sm font-medium text-gray-500">/mo</span></div>
                        <div class="self-start px-3 py-1 rounded-full bg-cyan-900/20 text-xs text-cyan-300 border border-cyan-500/20 mb-3">年払いで2ヶ月分無料</div>
                        <div class="text-sm text-gray-400 mb-6">年払い: ₹38,000</div>
                        <div class="py-4 border-t border-white/10 mb-6 flex-grow"><div class="text-3xl font-bold mb-1">36<span class="text-sm font-normal text-gray-500 ml-1">Channels</span></div><p class="text-sm text-gray-400">地上波 15ch + BS 21ch</p></div>
                        <button onclick="openChannelModal('planB')" class="block w-full py-3 rounded-xl border border-white/20 hover:bg-white hover:text-black text-center transition-all font-bold cursor-pointer">チャンネルを確認する</button>
                    </div>
                </div>
                <div class="glow-card-container interactive reveal-up relative h-full group">
                    <div class="glow-effect" aria-hidden="true"></div>
                    <div class="glow-card-content flex flex-col h-full">
                        <h3 class="text-xl font-bold mb-2">Plan C</h3>
                        <div class="text-4xl font-black mb-3">₹4,600<span class="text-sm font-medium text-gray-500">/mo</span></div>
                        <div class="self-start px-3 py-1 rounded-full bg-purple-900/20 text-xs text-purple-300 border border-purple-500/20 mb-3">年払いで3ヶ月分無料</div>
                        <div class="text-sm text-gray-400 mb-6">年払い: ₹41,400</div>
                        <div class="py-4 border-t border-white/10 mb-6 flex-grow"><div class="text-3xl font-bold mb-1">66<span class="text-sm font-normal text-gray-500 ml-1">Channels</span></div><p class="text-sm text-gray-400">地上波 15ch + BS 21ch + CS 30ch</p></div>
                        <button onclick="openChannelModal('planC')" class="block w-full py-3 rounded-xl border border-white/20 hover:bg-white hover:text-black text-center transition-all font-bold cursor-pointer">チャンネルを確認する</button>
                    </div>
                </div>
            </div>
            <div class="mt-12 max-w-4xl mx-auto text-left text-xs md:text-sm text-gray-400 space-y-2 reveal-up">
                <p><span class="text-pink-500 font-bold text-base align-middle mr-1">*</span>新規契約の契約期間は、最低3ヶ月となります。</p>
                <p><span class="text-pink-500 font-bold text-base align-middle mr-1">*</span>表示価格はクレジットカード決済時の金額です。小切手および銀行振込によるお支払いの場合は、サービス料（8%）およびGST（18%）が加算されます。</p>
            </div>
        </div>
    </section>

    <section id="trial" class="py-32 px-6 relative">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=2000&auto=format&fit=crop" alt="World Connection" class="w-full h-full object-cover opacity-30">
            <div class="absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/80 to-transparent"></div>
        </div>
        <div class="max-w-3xl mx-auto text-center relative z-10 glow-card-container reveal-up group luxury-card-fix">
            <div class="glow-effect" aria-hidden="true"></div>
            <div class="glow-card-content !p-12 flex flex-col items-center">
                <h2 class="text-3xl md:text-5xl font-black mb-6 text-white">１週間の無料体験を試す</h2>
                <p class="text-sm md:text-base text-gray-300 mb-8">
                    今なら1週間、完全無料で日本のテレビ体験を。<br>
                    リスクなしでお試しいただけます。
                </p>
                <div class="flex justify-center mb-8 w-full">
                    <a href="trial.html" class="gradient-button inline-flex items-center justify-center rounded-full min-w-[132px] px-6 md:px-9 py-4 text-sm leading-[19px] font-medium text-white font-sans font-bold focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:scale-105 transition-transform duration-300 whitespace-nowrap">
                        <span class="flex items-center gap-2">
                            1週間無料体験を申し込む <i class="ph-bold ph-lightning"></i>
                        </span>
                    </a>
                </div>
                <div class="flex flex-col md:flex-row items-center justify-center gap-3 md:gap-5 text-xs text-white font-bold mt-4 w-full">
                    <div class="flex items-center gap-2">
                        <i class="ph-fill ph-check-circle text-cyan-400"></i>
                        <span>クレジットカード登録不要</span>
                    </div>
                    <span class="hidden md:block w-1 h-1 rounded-full bg-white/50"></span>
                    <div class="flex items-center gap-2">
                        <i class="ph-fill ph-check-circle text-cyan-400"></i>
                        <span>自動課金なし</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="news" class="py-24 px-6 relative border-t border-white/5">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[300px] bg-cyan-900/10 rounded-full blur-[80px] pointer-events-none"></div>
        <div class="max-w-4xl mx-auto relative z-10">
            <div class="text-center mb-12 reveal-up">
                <h2 class="text-3xl md:text-5xl font-bold mb-4">お知らせ</h2>
                <p class="text-gray-400">最新のニュース</p>
            </div>
            <div id="news-container" class="flex flex-col gap-3 reveal-up min-h-[200px]">
                <div class="text-center text-gray-500 py-10">Loading news...</div>
            </div>
        </div>
    </section>

    <div id="channel-modal-overlay" class="fixed inset-0 z-[100] hidden modal-overlay items-center justify-center p-4">
        <div id="channel-modal" class="bg-[#0a0a0a] border border-white/10 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden transform scale-95 opacity-0 transition-all duration-300">
            <div class="px-6 py-5 border-b border-white/5 flex justify-between items-center bg-white/[0.02]">
                <div><h3 class="modal-plan-name text-3xl font-black text-white tracking-tight leading-none mb-1">Plan A</h3><p class="text-[10px] text-gray-500 font-medium uppercase tracking-wider">Channel List</p></div>
                <button onclick="closeChannelModal()" class="text-gray-500 hover:text-white transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10"><i class="ph-bold ph-x text-lg"></i></button>
            </div>
            <div id="modal-content" class="p-6 max-h-[60vh] overflow-y-auto custom-scrollbar" data-lenis-prevent></div>
            <div class="px-6 py-3 border-t border-white/5 bg-black/20 text-center"><button id="modal-close-btn" onclick="closeChannelModal()" class="w-full sm:w-auto px-6 py-2 rounded-lg border border-white/10 hover:bg-white hover:text-black text-gray-300 text-xs font-bold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-black">閉じる</button></div>
        </div>
    </div>

    <div id="news-modal-overlay" class="fixed inset-0 z-[100] hidden modal-overlay items-center justify-center p-4">
        <div id="news-modal" class="bg-[#0a0a0a] border border-white/10 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden transform scale-95 opacity-0 transition-all duration-300">
            <div class="px-6 py-5 border-b border-white/5 flex justify-between items-center bg-white/[0.02]">
                <h3 id="news-modal-title" class="text-xl font-bold text-white tracking-tight leading-snug"></h3>
                <button onclick="closeNewsModal()" class="text-gray-500 hover:text-white transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 shrink-0">
                    <i class="ph-bold ph-x text-lg"></i>
                </button>
            </div>
            <div id="news-modal-body" class="p-8 text-gray-300 text-sm md:text-base leading-relaxed whitespace-pre-wrap max-h-[60vh] overflow-y-auto custom-scrollbar"></div>
            <div class="px-6 py-3 border-t border-white/5 bg-black/20 text-center">
                <button id="news-modal-close-btn" onclick="closeNewsModal()" class="w-full sm:w-auto px-6 py-2 rounded-lg border border-white/10 hover:bg-white hover:text-black text-gray-300 text-xs font-bold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-black">閉じる</button>
            </div>
        </div>
    </div>

</Layout>

<script is:inline>
    // ==========================================
    // UI Interaction Logic
    // ==========================================
    const initScrollObserver = () => {
        try {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) { entry.target.classList.add('active'); }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal-up').forEach(el => observer.observe(el));
        } catch (e) {
            console.error("Scroll Observer Error:", e);
            document.querySelectorAll('.reveal-up').forEach(el => el.classList.add('active'));
        }
    };

    const initGlowingEffect = () => {
        const cards = document.querySelectorAll('.glow-card-container');
        const handleMove = (e) => {
            cards.forEach(card => {
                const glowEffect = card.querySelector('.glow-effect');
                if (!glowEffect) return;
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const inside = x >= -50 && x <= rect.width + 50 && y >= -50 && y <= rect.height + 50;
                if (inside) {
                    glowEffect.style.setProperty('--active', '1');
                    const centerX = rect.width / 2; const centerY = rect.height / 2;
                    const angle = Math.atan2(y - centerY, x - centerX) * (180 / Math.PI) + 90;
                    glowEffect.style.setProperty('--start', angle);
                } else {
                    glowEffect.style.setProperty('--active', '0');
                }
            });
        };
        window.addEventListener('mousemove', handleMove);
    };

    // ==========================================
    // Channel Accordion Logic
    // ==========================================
    const initAccordion = () => {
        const accordions = document.querySelectorAll('.accordion-item');
        accordions.forEach(acc => {
            const trigger = acc.querySelector('.accordion-trigger');
            const wrapper = acc.querySelector('.accordion-wrapper');
            const icon = acc.querySelector('.caret-icon');

            if (!trigger || !wrapper || !icon) return;

            trigger.addEventListener('click', (e) => {
                e.preventDefault();
                const isOpen = wrapper.classList.contains('grid-rows-[1fr]');
                
                if (isOpen) {
                    wrapper.classList.remove('grid-rows-[1fr]');
                    wrapper.classList.add('grid-rows-[0fr]');
                    icon.classList.remove('rotate-180');
                } else {
                    wrapper.classList.remove('grid-rows-[0fr]');
                    wrapper.classList.add('grid-rows-[1fr]');
                    icon.classList.add('rotate-180');
                }
            });
        });
    };

    // ==========================================
    // Channel Modal Logic
    // ==========================================
    const channelData = {
        planA: {
            title: "Plan A",
            groups: [{ name: "地上波", count: "15ch", channels: ["NHK 総合東京", "NHK Eテレ", "日本テレビ", "テレビ朝日", "TBSテレビ", "テレビ東京", "フジテレビ", "TOKYO MX", "NHK総合大阪", "読売テレビ", "毎日放送", "関西テレビ", "朝日放送", "テレビ大阪", "サンテレビ"] }, { name: "BS", count: "7ch", channels: ["NHK BS 東京", "NHK BSP4K", "BS 日本テレビ", "BS朝日", "BS TBS", "BS テレビ東京", "BS フジ"] }]
        },
        planB: {
            title: "Plan B",
            groups: [{ name: "地上波", count: "15ch", channels: ["NHK 総合東京", "NHK Eテレ", "日本テレビ", "テレビ朝日", "TBSテレビ", "テレビ東京", "フジテレビ", "TOKYO MX", "NHK総合大阪", "読売テレビ", "毎日放送", "関西テレビ", "朝日放送", "テレビ大阪", "サンテレビ"] }, { name: "BS", count: "21ch", channels: ["NHK BS 東京", "NHK BSP4K", "BS 日本テレビ", "BS朝日", "BS TBS", "BS テレビ東京", "BS フジ", "WOWWOW Plime", "WOWWOW ライブ", "WOWWOW シネマ", "BS10 スターチャンネル", "グリーンチャンネル", "BS アニマックス", "J-Sports 1", "J-Sports 2", "J-Sports 3", "J-Sports 4", "BS 釣りビジョン", "日本映画専門チャンネル", "Disney チャンネル", "J:COM BS"] }]
        },
        planC: {
            title: "Plan C",
            groups: [{ name: "地上波", count: "15ch", channels: ["NHK 総合東京", "NHK Eテレ", "日本テレビ", "テレビ朝日", "TBSテレビ", "テレビ東京", "フジテレビ", "TOKYO MX", "NHK総合大阪", "読売テレビ", "毎日放送", "関西テレビ", "朝日放送", "テレビ大阪", "サンテレビ"] }, { name: "BS", count: "21ch", channels: ["NHK BS 東京", "NHK BSP4K", "BS 日本テレビ", "BS朝日", "BS TBS", "BS テレビ東京", "BS フジ", "WOWWOW Plime", "WOWWOW ライブ", "WOWWOW シネマ", "BS10 スターチャンネル", "グリーンチャンネル", "BS アニマックス", "J-Sports 1", "J-Sports 2", "J-Sports 3", "J-Sports 4", "BS 釣りビジョン", "日本映画専門チャンネル", "Disney チャンネル", "J:COM BS"] }, { name: "CS", count: "30ch", channels: ["衛星劇場", "ムービープラス HD", "Sky A Sports", "Gaora Sports", "Nihon TV G+", "ゴルフネットワーク", "時代劇専門チャンネル", "ファミリー劇場 HD", "ホームドラマチャンネル", "MONDO TV", "フジテレビ NEXT", "女性チャンネル / LaLa TV", "Music Japan TV", "スペースシャワーTV", "MTV HD", "歌謡ポップスチャンネル", "キッズステーション", "カートゥーンネットワーク", "Disney Junior", "ディスカバリーチャンネル", "アニマルプラネット", "ヒストリーチャンネル", "National Geo graphic", "TBS News Bird", "TAKARAZUKA SKY STAGE", "東映チャンネル", "CNN J", "BBC World News", "旅チャンネル", "チャンネル銀河 歴史ドラマ"] }]
        }
    };
    const modalOverlay = document.getElementById('channel-modal-overlay');
    const modal = document.getElementById('channel-modal'); 
    const modalPlanName = document.querySelector('.modal-plan-name');
    const modalContent = document.getElementById('modal-content');

    window.openChannelModal = function(planId) {
        const data = channelData[planId];
        if (!data) return;
        modalPlanName.textContent = data.title;
        let html = '';
        data.groups.forEach(group => {
            html += `<div class="mb-6 last:mb-0"><div class="flex items-baseline gap-3 mb-3 border-b border-white/10 pb-1"><h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider">${group.name}</h4><span class="text-[10px] text-gray-600 font-mono">${group.count}</span></div><div class="grid grid-cols-2 sm:grid-cols-3 gap-x-2 gap-y-1.5">${group.channels.map(ch => `<div class="text-[11px] sm:text-xs text-gray-300 hover:text-white transition-colors cursor-default truncate" title="${ch}">${ch}</div>`).join('')}</div></div>`;
        });
        modalContent.innerHTML = html;
        if(modalOverlay) {
            modalOverlay.classList.remove('hidden'); modalOverlay.classList.add('flex');
            setTimeout(() => { modal.classList.remove('scale-95', 'opacity-0'); modal.classList.add('scale-100', 'opacity-100'); const closeBtn = document.getElementById('modal-close-btn'); if (closeBtn) { closeBtn.focus(); } }, 10);
            document.body.style.overflow = 'hidden';
        }
    }

    window.closeChannelModal = function() {
        if(!modal) return;
        modal.classList.remove('scale-100', 'opacity-100');
        modal.classList.add('scale-95', 'opacity-0');
        setTimeout(() => { if(modalOverlay) { modalOverlay.classList.add('hidden'); modalOverlay.classList.remove('flex'); } document.body.style.overflow = ''; }, 300);
    }
    if (modalOverlay) {
        modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) { window.closeChannelModal(); } });
    }

    // ==========================================
    // News Fetcher & Modal
    // ==========================================
    const newsModalOverlay = document.getElementById('news-modal-overlay');
    const newsModal = document.getElementById('news-modal');
    const newsModalTitle = document.getElementById('news-modal-title');
    const newsModalBody = document.getElementById('news-modal-body');

    window.openNewsModal = function(title, body) {
        if(!newsModalOverlay) return;
        newsModalTitle.textContent = title;
        newsModalBody.innerHTML = body;
        newsModalOverlay.classList.remove('hidden'); 
        newsModalOverlay.classList.add('flex');
        setTimeout(() => { 
            if(newsModal) {
                newsModal.classList.remove('scale-95', 'opacity-0'); 
                newsModal.classList.add('scale-100', 'opacity-100'); 
                const closeBtn = document.getElementById('news-modal-close-btn'); 
                if (closeBtn) { closeBtn.focus(); }
            }
        }, 10);
        document.body.style.overflow = 'hidden';
    }

    window.closeNewsModal = function() {
        if(!newsModal) return;
        newsModal.classList.remove('scale-100', 'opacity-100'); 
        newsModal.classList.add('scale-95', 'opacity-0');
        setTimeout(() => { 
            if(newsModalOverlay) {
                newsModalOverlay.classList.add('hidden'); 
                newsModalOverlay.classList.remove('flex'); 
            }
            document.body.style.overflow = ''; 
        }, 300);
    }
    
    if(newsModalOverlay) {
        newsModalOverlay.addEventListener('click', (e) => { 
            if (e.target === newsModalOverlay) window.closeNewsModal(); 
        });
    }

    const initNewsFetcher = () => {
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbxAobcVcpWMlQaCSainucdxNRZ-XjfqVDeqGfUMZMm6C0oib8wxmvuXZSoIppMnB7q19g/exec";
        const container = document.getElementById('news-container');
        if (!container) return;

        fetch(GAS_API_URL)
            .then(response => response.json())
            .then(data => {
                if (!data || data.length === 0) {
                    container.innerHTML = '<div class="text-center text-gray-500 py-4">お知らせはありません</div>';
                    return;
                }
                const recentNews = data.slice(0, 3);
                const html = recentNews.map(item => {
                    // 日付データの取得（大文字・小文字両対応）
                    const entryDate = item.Date || item.date;
                    const entryTitle = item.Title || item.title;
                    const entryContent = item.Content || item.content || item.body;
                    const entryLabel = item.Label || item.label;
                    const entryType = item.Type || item.type;

                    // 日付フォーマットの安全な変換
                    let dateStr = "";
                    if (entryDate) {
                        try {
                            const d = new Date(entryDate);
                            // Invalid Dateチェック
                            if (d.toString() !== 'Invalid Date') {
                                dateStr = `${d.getFullYear()}.${String(d.getMonth() + 1).padStart(2, '0')}.${String(d.getDate()).padStart(2, '0')}`;
                            } else {
                                // パース失敗時は元の文字列を使用
                                dateStr = String(entryDate);
                            }
                        } catch (e) {
                            dateStr = String(entryDate);
                        }
                    }

                    let labelClass = "border-white/10 bg-white/5 text-gray-400";
                    if (entryType === 'キャンペーン' || entryType === 'important') {
                        labelClass = "border-pink-500/30 bg-pink-900/20 text-pink-400";
                    } else if (entryType === 'お知らせ' || entryType === 'update') {
                        labelClass = "border-cyan-500/30 bg-cyan-900/20 text-cyan-300";
                    }

                    const safeTitle = (entryTitle || "").replace(/'/g, "\\'");
                    const safeBody = (entryContent || "").replace(/'/g, "\\'").replace(/\n/g, "<br>");

                    return `
                    <div onclick="openNewsModal('${safeTitle}', '${safeBody}')" class="group relative overflow-hidden rounded-2xl glass-panel p-5 md:px-8 transition-all duration-300 hover:bg-white/5 hover:border-white/20 hover:-translate-y-1 block cursor-pointer">
                        <div class="flex flex-row items-center justify-between gap-4 relative z-10">
                            <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6 flex-1 min-w-0">
                                <div class="flex items-center gap-4 shrink-0">
                                    <time class="text-sm text-gray-500 font-mono tracking-wide">${dateStr}</time>
                                    <span class="px-2 py-0.5 rounded text-[10px] font-bold border ${labelClass} tracking-wider">${entryLabel}</span>
                                </div>
                                <p class="text-sm md:text-base font-medium text-gray-200 group-hover:text-white transition-colors line-clamp-1 break-all">${entryTitle}</p>
                            </div>
                            <i class="ph-bold ph-caret-right text-gray-600 group-hover:text-cyan-400 group-hover:translate-x-1 transition-all duration-300 shrink-0 text-lg"></i>
                        </div>
                    </div>`;
                }).join('');
                container.innerHTML = html;
            })
            .catch(error => {
                console.error('Fetch Error:', error);
                container.innerHTML = '<div class="text-center text-gray-500 py-4">情報の読み込みに失敗しました</div>';
            });
    };

    initScrollObserver();
    initGlowingEffect();
    initAccordion();
    initNewsFetcher();
</script>